(this["webpackJsonpmigration-dashboard"]=this["webpackJsonpmigration-dashboard"]||[]).push([[0],{26:function(e,t,n){e.exports=n(35)},35:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(6),o=n.n(r),l=n(9),s=n(21),c=n(1),d=n(16),u=n(17),m=n(7),f=n(23),h=n(22),b=n(2),p=n(3),v=n(36),g=n(37);var y=function(e){var t=e.name,n=e.nodeId,a=e.updateItem,r=e.drupalId,o=e.listId;return i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("a",{href:"/node/".concat(n)},t)),i.a.createElement("td",null,"todo"===o?i.a.createElement("button",{type:"button",onClick:function(){a(r,o,"inProgress","In Progress")}},"Add to In Progress"):i.a.createElement("span",null,"\xa0")))};function E(){var e=Object(b.a)(["\n  margin-top: 3em;\n  //When element enters dom */\n  .fade-enter {\n    opacity: 0;\n  }\n  /* After element enters [transition time] */\n  .fade-enter-active {\n    opacity: 1;\n    transition: opacity 500ms ease-in;\n  }\n  /* When state turns false */\n  .fade-exit {\n    opacity: 1;\n  }\n  /* Right after exit [transition time] */\n  .fade-exit-active {\n    opacity: 0;\n    transition: opacity 500ms ease-in;\n  }\n"]);return E=function(){return e},e}var j=p.a.div(E());function I(e){var t=e.title,n=e.listId,a=e.bios,r=e.updateItem;return i.a.createElement(j,null,i.a.createElement("h2",null,t," ",i.a.createElement("span",null,a.length?"(".concat(a.length," item").concat(a.length>1?"s":"",")"):null)),i.a.createElement("table",{className:"views-table views-view-table cols-7 responsive-enabled sticky-enabled sticky-table"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Name"),i.a.createElement("th",null," "))),i.a.createElement("tbody",null,a.length?i.a.createElement(g.a,{component:null},a.map((function(e){return i.a.createElement(v.a,{key:e.id,timeout:500,classNames:"fade"},i.a.createElement(y,{key:e.id,name:e.attributes.title,nodeId:e.attributes.drupal_internal__nid,updateItem:r,drupalId:e.id,listId:n}))}))):i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"2"},"No bios with this status.")))))}I.defaultProps={bios:[]};var O=I;function _(){var e=Object(b.a)(["\n  flex: 1 1 30%;\n  border: 1px solid grey;\n  margin: 0.5rem;\n  padding: 1rem;\n  border-radius: 10px;\n  display: flex;\n  & div {\n    flex: 1;\n    padding: 1em;\n  }\n  & div.field--name-body {\n    flex: 2;\n  }\n  & h3 {\n    margin-top: 0;\n  }\n  & img.match-image-style {\n    width: 100px;\n  }\n"]);return _=function(){return e},e}var k=p.a.article(_());var x=function(e){var t=e.name,n=e.nodeId,a=e.updateItem,r=e.drupalId,o=e.summary,l=e.headshotAlt,s=e.headshotFilename;return i.a.createElement(k,null,i.a.createElement("div",{className:"field field--name-field-headshot field--type-image field__item"},i.a.createElement("img",{src:"/sites/default/files/styles/thumbnail/public/headshots/".concat(s),alt:l})),i.a.createElement("div",{className:"clearfix text-formatted field field--name-body field--type-text-with-summary field__item"},i.a.createElement("h3",null,i.a.createElement("a",{href:"/node/".concat(n)},t),"\xa0",i.a.createElement("a",{href:"/node/".concat(n,"/edit")},"(Edit)")),i.a.createElement("p",null,o),i.a.createElement("button",{type:"button",onClick:function(){a(r,"inProgress","todo","To Do")}},"Move -> To Do")))};function w(){var e=Object(b.a)(["\n  display: flex;\n  flex-wrap: wrap;\n"]);return w=function(){return e},e}function P(){var e=Object(b.a)(["\n  margin-top: 3em;\n  //When element enters dom */\n  .fade-enter {\n    opacity: 0;\n  }\n  /* After element enters [transition time] */\n  .fade-enter-active {\n    opacity: 1;\n    transition: opacity 500ms ease-in;\n  }\n  /* When state turns false */\n  .fade-exit {\n    opacity: 1;\n  }\n  /* Right after exit [transition time] */\n  .fade-exit-active {\n    opacity: 0;\n    transition: opacity 500ms ease-in;\n  }\n"]);return P=function(){return e},e}var A=p.a.div(P()),T=p.a.div(w());function C(e){var t=e.title,n=e.bios,a=e.updateItem,r=e.included;return i.a.createElement(A,null,i.a.createElement("h2",null,t," ",i.a.createElement("span",null,n.length?"(".concat(n.length," item").concat(n.length>1?"s":"",")"):null)),i.a.createElement(T,null,n.length?i.a.createElement(g.a,{component:null},n.map((function(e){var t=r.find((function(t){return t.id===e.relationships.field_headshot.data.id})).attributes.filename;return i.a.createElement(v.a,{key:e.id,timeout:500,classNames:"fade"},i.a.createElement(x,{key:e.id,summary:e.attributes.body.summary,name:e.attributes.title,nodeId:e.attributes.drupal_internal__nid,updateItem:a,drupalId:e.id,headshotId:e.relationships.field_headshot.data.id,headshotAlt:e.relationships.field_headshot.data.meta.alt,headshotFilename:t}))}))):i.a.createElement("div",null,"Ready for bios!")))}C.defaultProps={bios:[]};var N=C;function D(){var e=Object(b.a)(["\n  position: relative;\n  padding: .75rem 1.25rem;\n  margin-bottom: 1rem;\n  border: 1px solid transparent;\n  border-radius: .25rem;\n\n  &.alert-danger {\n    color: #721c24;\n    background-color: #f8d7da;\n    border-color: #f5c6cb;\n  }\n"]);return D=function(){return e},e}var S=p.a.div(D());var W=function(e){var t=e.message,n=e.type;return i.a.createElement(S,{className:"alert-".concat(n),role:"alert"},t)};var R=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={alert:"",bioData:[],bioIncluded:[],lists:{inProgress:{id:"inProgress",title:"In Progress"},todo:{id:"todo",title:"To Do"},done:{id:"done",title:"Done"}}},e.updateItem=e.updateItem.bind(Object(m.a)(e)),e.fetchUpdate=e.fetchUpdate.bind(Object(m.a)(e)),e.slowChangeAlert=e.slowChangeAlert.bind(Object(m.a)(e)),e.fetchItems(),e}return Object(u.a)(n,[{key:"fetchItems",value:function(){var e=this;fetch("/alittlebithidden/437/jsonapi/node/bio?include=field_headshot",{method:"GET",credentials:"include",headers:{"Content-Type":"application/vnd.api+json"}}).then((function(t){if(!t.ok)throw Error(t.statusText);t.json().then((function(t){(function(e){return null!==e&&(void 0!==e.data&&null!==e.data&&0!==e.data.length)})(t)&&e.setState({bioData:t.data,bioIncluded:t.included,lists:{inProgress:Object(c.a)(Object(c.a)({},e.state.lists.inProgress),{},{bios:t.data.filter((function(e){return"In Progress"===e.attributes.field_2020_migration_status}))}),todo:Object(c.a)(Object(c.a)({},e.state.lists.todo),{},{bios:t.data.filter((function(e){return"To Do"===e.attributes.field_2020_migration_status}))}),done:Object(c.a)(Object(c.a)({},e.state.lists.done),{},{bios:t.data.filter((function(e){return"Done"===e.attributes.field_2020_migration_status}))})}})}))})).catch((function(e){return console.log("Initial GET API error",e)}))}},{key:"fetchUpdate",value:function(e,t,n,a){var i=this,r=this.state.bioData,o=r.find((function(t){return t.id===e}));o.attributes.field_2020_migration_status=a;var d=this.state.lists[t].bios.filter((function(t){return t.id!==e})),u="/alittlebithidden/437/jsonapi/node/bio/".concat(e);fetch("/session/token?_format=json",{method:"GET",headers:{Accept:"application/vnd.api+json"}}).then((function(e){return e.text()})).then((function(m){fetch(u,{method:"PATCH",credentials:"same-origin",headers:{Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json","X-CSRF-Token":m},body:JSON.stringify({data:{type:"node--bio",id:e,attributes:{field_2020_migration_status:a}}})}).then((function(e){var a;if(!e.ok)throw i.setState(Object(c.a)(Object(c.a)({},i.state),{},{alert:"Node couldn't be updated on the server."})),Error(e.statusText);i.setState(Object(c.a)(Object(c.a)({},i.state),{},{bioData:r,lists:Object(c.a)(Object(c.a)({},i.state.lists),{},(a={},Object(l.a)(a,t,Object(c.a)(Object(c.a)({},i.state.lists[t]),{},{bios:d})),Object(l.a)(a,n,Object(c.a)(Object(c.a)({},i.state.lists[n]),{},{bios:[].concat(Object(s.a)(i.state.lists[n].bios),[o])})),a))}))})).catch((function(e){return console.log("API Patch error",e)}))})).catch((function(e){return console.log("API Token error",e)}))}},{key:"updateItem",value:function(e,t,n,a){this.fetchUpdate(e,t,n,a)}},{key:"slowChangeAlert",value:function(){var e=this;return this.state.alert.length>0&&(setTimeout((function(){e.setState(Object(c.a)(Object(c.a)({},e.state),{},{alert:""}))}),5e3),i.a.createElement(W,{message:this.state.alert,type:"danger"}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},this.slowChangeAlert(),["inProgress","todo","done"].map((function(t){var n=e.state.lists[t];return"inProgress"===t?i.a.createElement(N,{key:n.id,title:n.title,bios:n.bios,updateItem:e.updateItem,included:e.state.bioIncluded}):i.a.createElement(O,{key:n.id,title:n.title,listId:n.id,bios:n.bios,updateItem:e.updateItem})})))}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(R,null),document.getElementById("react-app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);